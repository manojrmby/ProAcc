
@{
    ViewBag.Title = "CreateAnalysis";
    Layout = "~/Views/shared/_Layout.cshtml";
}
<style type="text/css">
    .cs_Closed {
        color: lightgreen;
    }

    .cs_Inprogress {
        color: cornflowerblue;
    }

    .file {
        visibility: hidden;
        position: absolute;
    }

    .file {
        visibility: hidden;
        position: absolute;
    }
</style>
<script src="~/Asset/Scripts/Chart.js"></script>
<script src="~/Asset/Scripts/Chart.RadialGauge.umd.js"></script>
<link href="~/Asset/css/jBox.all.css" rel="stylesheet" />
<link href="~/Asset/css/Demo.css" rel="stylesheet" />


@*<script src="~/Asset/Scripts/utils.js"></script>*@

<div style="padding: 1em;">
    <ul class="body-tabs body-tabs-layout tabs-animated body-tabs-animated nav">
        <li class="nav-item">
            <a role="tab" class="nav-link active" id="tab-0" data-toggle="tab" href="#tab-content-0">
                <span>Create Analysis</span>
            </a>
        </li>
        <li class="nav-item">
            <a role="tab" class="nav-link" id="tab-1" data-toggle="tab" href="#tab-content-1">
                <span>Readiness Report</span>
            </a>
        </li>
        <li class="nav-item">
            <a role="tab" class="nav-link" id="tab-2" data-toggle="tab" href="#tab-content-2">
                <span>Compatibility Report</span>
            </a>
        </li>
    </ul>
    <div class="row">
        <div class="card-body col-lg-12 card">
            <h5 class="card-title">Create Analysis</h5>


            <div class="position-relative form-group">
                <label for="exampleEmail" class="">Customer Name</label>
                @Html.DropDownList("Customer", (IEnumerable<SelectListItem>)ViewBag.Customer, new { id = "IDCustomer", @class = "form-control" })
            </div>

            <div class="position-relative form-group">
                <label for="exampleEmail" class="">Project Name</label>
                @Html.DropDownList("Project", (IEnumerable<SelectListItem>)ViewBag.Project, new { id = "IDProject", @class = "form-control" })
            </div>
            <div class="position-relative form-group">
                <label for="exampleEmail" class="">Instance Name</label>
                <input name="email" id="InstanceID" placeholder="" class="form-control">
            </div>
            <label>Activities</label>
            <input type="file" name="files" id="FileUpload1" />
            <label>Bwextractors</label>
            <input type="file" name="files" id="FileUpload2" />
            <label>CustomCode</label>
            <input type="file" name="files" id="FileUpload3" />
            <label>HanaDatabaseTables</label>
            <input type="file" name="files" id="FileUpload4" />
            <label>RecommendedFioriApps</label>
            <input type="file" name="files" id="FileUpload5" />
            <label>RelevantSimplificationItems</label>
            <input type="file" name="files" id="FileUpload6" />
            <label>SAP Readiness Check</label>
            <input type="file" name="files" id="FileUpload7" />


            <div class="position-relative form-group">

                <div class="custom-checkbox custom-control">
                    <input type="checkbox" id="exampleCustomCheckbox" class="custom-control-input">
                    <label class="custom-control-label" for="exampleCustomCheckbox">I have read the SAP Readiness check Disclaimer and SAP readiness check term of use</label>
                </div>
                <div class="custom-checkbox custom-control">
                    <input type="checkbox" id="exampleCustomCheckbox2" class="custom-control-input">
                    <label class="custom-control-label" for="exampleCustomCheckbox2">
                        I acknowldge all SAP employees may access and use the SAP Readiness check results for SAP business purposes like support services and marketing
                    </label>
                </div>


            </div>
            <div class="row">
                <div class="col-sm-4">
                    <div id="progressbar-5">
                        <div class="progress-label">
                        </div>
                    </div>
                </div>
            </div>
            <div class="text-center">
                <button class="btn-wide mb-2 mr-2 btn btn-primary" id="btnUpload">
                    Start Analysis
                </button>
            </div>

        </div>
        @*<div class="col-lg-6">
                <div class="row" style="padding:0em 1em 1em 1em;">
                    <div class="col-lg-6 card text-center">
                        <label>In Progress</label>
                        <canvas id="chart-area"></canvas>
                        <label>Total: 238</label>
                    </div>
                    <div class="col-lg-6 card text-center">
                        <label>Closed</label>
                        <canvas id="chart-area1"></canvas>
                        <label>Total: 80</label>
                    </div>
                </div>
                <div class="main-card mb-6 card">
                    <div class="card-body">
                        <h5 class="card-title">Recent Updates</h5>
                        <table class="mb-0 table table-hover">
                            <thead>
                                <tr>

                                    <th>Analysis Name</th>
                                    <th>Customer Name</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>

                                    <td>Custom Code Analysis</td>
                                    <td>Mathew Anderson</td>
                                    <td class="cs_Inprogress">Inprogress</td>
                                </tr>
                                <tr>

                                    <td>Pre Check report</td>
                                    <td>Latin Mike</td>
                                    <td class="cs_Inprogress">Inprogress</td>
                                </tr>
                                <tr>
                                    <td>Making DB to code</td>
                                    <td>Mathew anderson</td>
                                    <td class="cs_Closed">Closed</td>
                                </tr>
                                <tr>
                                    <td>Check server role</td>
                                    <td>Anamika M </td>
                                    <td class="cs_Inprogress">Inprogress</td>
                                </tr>
                                <tr>
                                    <td>Auto Start SAP Services</td>
                                    <td>Hayden Leu </td>
                                    <td class="cs_Closed">Closed</td>
                                </tr>
                                <tr>
                                    <td>AutoUnlock DDIC</td>
                                    <td>Steve Michael</td>
                                    <td class="cs_Inprogress">Inprogress</td>
                                </tr>
                                <tr>
                                    <td>AutoUnlock DDIC</td>
                                    <td>Steve Michael</td>
                                    <td class="cs_Inprogress">Inprogress</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>*@
    </div>
</div>
@*<div style="display: none" id="grabMe">


        <div class="col-12">
            <div class="row">
                <div class="form-group">
                    <input type="file" class="file" id="myFile" multiple size="50" onchange="myFunction()">


                    <div class="input-group col-xs-12" id="Brow">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-picture"></i></span>
                        <input type="text" class="form-control input-lg" disabled placeholder="Upload Image">
                        <span class="input-group-btn">
                            <button class="browse btn btn-primary input-lg" type="button"><i class="glyphicon glyphicon-search"></i> Browse</button>
                            <button class="btn-icon btn-icon-only btn btn-outline-danger"><i class="fa fa-trash btn-icon-wrapper"> </i></button>
                        </span>

                    </div>
                    <p id="demo"></p>
                </div>

            </div>

        </div>
        <div class="row">
            <div class="form-group">
                <button class="btn-wide mb-2 mr-2 btn btn-primary" id="fi_upload">
                    Submit
                </button>
                <button class="btn btn-outline-danger" id="ClaerFileUpload"><i class="fa fa-trash btn-icon-wrapper"></i></button>
            </div>
        </div>

    </div>*@

@*<script src="~/Asset/Scripts/jBox.all.js"></script>*@
@*<script type="text/javascript">

        //var randomScalingFactor = function () {
        //    return Math.round(Math.random() * 100);
        //};
        //new jBox('Modal', {
        //    attach: '#Modal-1',
        //    height: 350,
        //    width: 600,
        //    title: 'File\'s Upload',
        //    content: $('#grabMe')
        //});

        Chart.defaults.global.defaultFontFamily = "Verdana";

        var ctx = document.getElementById("chart-area").getContext("2d");
        var ctx1 = document.getElementById("chart-area1").getContext("2d");
        window.onload = function () {
            var ctx = document.getElementById("chart-area").getContext("2d");
            window.myRadialGauge = new Chart(ctx, config);

            var ctx1 = document.getElementById("chart-area1").getContext("2d");
            window.myRadialGauge = new Chart(ctx1, config1);
        };





        var gradientStroke_Progress = ctx.createLinearGradient(500, 0, 100, 0);
        gradientStroke_Progress.addColorStop(0, "#FDB777");
        gradientStroke_Progress.addColorStop(1, "#FD9346");

        var gradientStroke_Closed = ctx.createLinearGradient(500, 0, 100, 0);
        gradientStroke_Closed.addColorStop(0, "#FB291B");
        gradientStroke_Closed.addColorStop(1, "#CD1B2D");

        var config = {
            type: "radialGauge",
            data: {
                labels: ["In Progress"],
                datasets: [
                    {
                        data: [60],
                        backgroundColor: [gradientStroke_Progress],
                        borderWidth: 0,
                        label: "Score"
                    }
                ]
            },
            options: {
                responsive: true,
                legend: {},
                title: {
                    display: false,
                    text: "Radial gauge chart"
                },
                centerPercentage: 60,
                centerArea: {
                    displayText: true,
                    text: "60%"
                }
            }
        };

        var config1 = {
            type: "radialGauge",
            data: {
                labels: ["Closed"],
                datasets: [
                    {
                        data: [40],
                        backgroundColor: [gradientStroke_Closed],
                        borderWidth: 0,
                        label: "Score"
                    }
                ]
            },
            options: {
                responsive: true,
                legend: {},
                title: {
                    display: false,
                    text: "Radial gauge chart"
                },
                centerPercentage: 60,
                centerArea: {
                    displayText: true,
                    text: "40%"
                }
            }
        };


        //'<div style="line-height: 30px;">Try to scroll ...it\'s blocked.<br>Press [ESC] or click anywhere to close.</div>'



    </script>*@
<script>
    $(document).ready(function () {
        $('#btnUpload').click(function () {

            var fileUpload1 = $("#FileUpload1").get(0);
            var fileUpload2 = $("#FileUpload2").get(0);

            var fileUpload3 = $("#FileUpload3").get(0);
            var fileUpload4 = $("#FileUpload4").get(0);

            var fileUpload5 = $("#FileUpload5").get(0);
            var fileUpload6 = $("#FileUpload6").get(0);

            var fileUpload7 = $("#FileUpload7").get(0);

            var Cust_ID = $("select#IDCustomer").val();
            var IDProject = $("select#IDProject").val();
            var InstanceID = $("#InstanceID").val();

            var files = [
                fileUpload1.files, fileUpload2.files,
                fileUpload3.files, fileUpload4.files,
                fileUpload5.files, fileUpload6.files,
                fileUpload7.files
            ];

            var fileData = new FormData();
            fileData.append("Cust_ID", Cust_ID);
            fileData.append("IDProject", IDProject);
            fileData.append("InstanceID", InstanceID);

            // Looping over all files and add it to FormData object
            for (var i = 0; i < files.length; i++) {
                if (files[i][0] != null)
                    fileData.append(i, files[i][0]);
            }


            $.ajax({
                //url: '<%: Url.Action("Upload")%>?Cust_ID=' + Cust_ID + '&IDProject=' + IDProject+'&InstanceID='+InstanceID,
                url: '@Url.Action("Upload", "Assessment")',
                type: "POST",
                contentType: false, // Not to set any content header
                processData: false, // Not to process data
                data: fileData,
                async: false,
                success: function (result) {
                    if (result != "") {
                        $('#FileBrowse').find("*").prop("disabled", true);
                        LoadProgressBar(result); //calling LoadProgressBar function to load the progress bar.
                    }
                },
                error: function (err) {
                    alert(err.statusText);
                }
            });

        });
    });

    function LoadProgressBar(result) {
        var progressbar = $("#progressbar-5");
        var progressLabel = $(".progress-label");
        progressbar.show();
        $("#progressbar-5").progressbar({
            //value: false,
            change: function () {
                progressLabel.text(
                    progressbar.progressbar("value") + "%");  // Showing the progress increment value in progress bar
            },
            complete: function () {
                progressLabel.text("Loading Completed!");
                progressbar.progressbar("value", 0);  //Reinitialize the progress bar value 0
                progressLabel.text("");
                progressbar.hide(); //Hiding the progress bar
                var markup = "<tr><td>" + result + "</td><td><a href='#' onclick='DeleteFile(\"" + result + "\")'><span class='glyphicon glyphicon-remove red'></span></a></td></tr>"; // Binding the file name
                $("#ListofFiles tbody").append(markup);
                $('#Files').val('');
                $('#FileBrowse').find("*").prop("disabled", false);
            }
        });
        function progress() {
            var val = progressbar.progressbar("value") || 0;
            progressbar.progressbar("value", val + 1);
            if (val < 99) {
                setTimeout(progress, 25);
            }
        }
        setTimeout(progress, 100);
    }
</script>





