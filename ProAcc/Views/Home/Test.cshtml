
@{
	ViewBag.Title = "Home";
	Layout = "~/Views/shared/_Layout.cshtml";
}


@*<script type="text/javascript" src="https://www.amcharts.com/lib/3/amcharts.js"></script>
	<script type="text/javascript" src="https://www.amcharts.com/lib/3/serial.js"></script>
	<style>
		#chartdiv {
		width : 100%;
		height : 300px;
	}
	</style>
	<div id="chartdiv"></div>
	<script>
		var chartData = [{
			"category": 2009,
			"income": 23.5,
			"url": "#",
			"description": "click to drill-down",
			"months": [
				{ "category": 1, "income": 1 },
				{ "category": 2, "income": 2 },
				{ "category": 3, "income": 1 },
				{ "category": 4, "income": 3 },
				{ "category": 5, "income": 2.5 },
				{ "category": 6, "income": 1.1 },
				{ "category": 7, "income": 2.9 },
				{ "category": 8, "income": 3.5 },
				{ "category": 9, "income": 3.1 },
				{ "category": 10, "income": 1.1 },
				{ "category": 11, "income": 1 },
				{ "category": 12, "income": 3 }
			]
		}, {
			"category": 2010,
			"income": 26.2,
			"url": "#",
			"description": "click to drill-down",
			"months": [
				{ "category": 1, "income": 4 },
				{ "category": 2, "income": 3 },
				{ "category": 3, "income": 1 },
				{ "category": 4, "income": 4 },
				{ "category": 5, "income": 2 },
				{ "category": 6, "income": 1 },
				{ "category": 7, "income": 2 },
				{ "category": 8, "income": 2 },
				{ "category": 9, "income": 3 },
				{ "category": 10, "income": 1 },
				{ "category": 11, "income": 1 },
				{ "category": 12, "income": 3 }
			]
		}, {
			"category": 2011,
			"income": 30.1,
			"url": "#",
			"description": "click to drill-down",
			"months": [
				{ "category": 1, "income": 2 },
				{ "category": 2, "income": 3 },
				{ "category": 3, "income": 1 },
				{ "category": 4, "income": 5 },
				{ "category": 5, "income": 2 },
				{ "category": 6, "income": 1 },
				{ "category": 7, "income": 2 },
				{ "category": 8, "income": 2.5 },
				{ "category": 9, "income": 3.1 },
				{ "category": 10, "income": 1.1 },
				{ "category": 11, "income": 1 },
				{ "category": 12, "income": 3 }
			]
		}];

		var chart = AmCharts.makeChart("chartdiv", {
			"type": "serial",
			"theme": "none",
			"pathToImages": "/lib/3/images/",
			"autoMargins": false,
			"marginLeft": 30,
			"marginRight": 8,
			"marginTop": 10,
			"marginBottom": 26,
			"titles": [{
				"text": "Yearly data"
			}],
			"dataProvider": chartData,
			"startDuration": 1,
			"graphs": [{
				"alphaField": "alpha",
				"balloonText": "<span style='font-size:13px;'>[[title]] in [[category]]:<b>[[value]]</b> [[additional]]</span>< br > [[description]]",
				"dashLengthField": "dashLengthColumn",
				"fillAlphas": 1,
				"title": "Income",
				"type": "column",
				"valueField": "income", "urlField": "url"
			}],
			"categoryField": "category",
			"categoryAxis": {
				"gridPosition": "start",
				"axisAlpha": 0,
				"tickLength": 0
			}
		});

		chart.addListener("clickGraphItem", function (event) {
			if ('object' === typeof event.item.dataContext.months) {

				// set the monthly data for the clicked month
				event.chart.dataProvider = event.item.dataContext.months;

				// update the chart title
				event.chart.titles[0].text = event.item.dataContext.category + ' monthly data';

				// let's add a label to go back to yearly data
				event.chart.addLabel(
					"!10", 25,
					"Go back to yearly >",
					"right",
					undefined,
					undefined,
					undefined,
					undefined,
					true,
					'javascript:resetChart();');

				// validate the new data and make the chart animate again
				event.chart.validateData();
				event.chart.animateAgain();
			}
		});

		// function which resets the chart back to yearly data
		function resetChart() {
			chart.dataProvider = chartData;
			chart.titles[0].text = 'Yearly data';

			// remove the "Go back" label
			chart.allLabels = [];

			chart.validateData();
			chart.animateAgain();
		}

	</script>*@


<style>
	#chartdiv {
		width: 100%;
		height: 500px;
	}
</style>

<!-- Resources -->
@*<script src="https://www.amcharts.com/lib/4/core.js"></script>
	<script src="https://www.amcharts.com/lib/4/charts.js"></script>
	<script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>*@
<script src="~/Asset/Scripts/amCharts/core.js"></script>
<script src="~/Asset/Scripts/amCharts/charts.js"></script>
<script src="~/Asset/Scripts/amCharts/animated.js"></script>

<!-- Chart code -->
<script>
	$(document).ready(function () {
				//alert('calll');
			   $.ajax({
				type: "POST",
				url: '@Url.Action("GetRelevant")',
				//data: '{std: ' + JSON.stringify(std) + '}',
				dataType: "json",
				contentType: "application/json; charset=utf-8",
				   success: function (Data) {
					  chart_Assessment(Data)

				},
				error: function () {
					alert("Error while inserting data");
				}
			});

			});

			function chart_Assessment(Re_Result) {
				am4core.ready(function () {

		// Themes begin
		am4core.useTheme(am4themes_animated);
		// Themes end

		// Create chart instance
		var chart = am4core.create("chartdiv", am4charts.PieChart);

		// Add data
					chart.data = [
						{
			"Relevant": "Relevant",
			"litres": Re_Result.R
						},
						{
			"Relevant": "Relevance to be Checked",
			"litres": Re_Result.RC
						},
						{
			"Relevant": "Relevance to be Checked (Non-strategic)",
			"litres": Re_Result.RC_NON
						},
						{
			"Relevant": "Relevant (Non-strategic)",
			"litres": Re_Result.R_NON
		}
		];

		// Add and configure Series
		var pieSeries = chart.series.push(new am4charts.PieSeries());
		pieSeries.dataFields.value = "litres";
		pieSeries.dataFields.category = "Relevant";
		pieSeries.innerRadius = am4core.percent(50);
		pieSeries.ticks.template.disabled = true;
		pieSeries.labels.template.disabled = true;

		var rgm = new am4core.RadialGradientModifier();
		rgm.brightnesses.push(-0.8, -0.8, -0.5, 0, - 0.5);
		pieSeries.slices.template.fillModifier = rgm;
		pieSeries.slices.template.strokeModifier = rgm;
		pieSeries.slices.template.strokeOpacity = 0.4;
		pieSeries.slices.template.strokeWidth = 0;

		//chart.legend = new am4charts.Legend();
		//chart.legend.position = "right";

	}); // end am4core.ready()

			}

</script>

<!-- HTML -->
<div id="chartdiv"></div>